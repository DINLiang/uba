<div class="u-mdlayout" id="demo-mdlayout">

	<div class="u-mdlayout-master" style="display:none"></div>

	<div class="u-mdlayout-detail">
		<div class="u-mdlayout-page u-navlayout-fixed-header current" id="list">
			<div class="u-mdlayout-page-section">

				<div class="u-container-fluid u-widget-bg">
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget" style="background-color:transparent">
								<button class="u-button raised primary m-r-sm" data-bind="click: events.beforeAdd">
									发布订单
								</button>
								<button class="u-button raised" data-bind="click: events.delRow">
									删除
								</button>
								<button class="u-button raised" data-bind="click: events.print">
									打印
								</button>
								<button class="u-button raised" data-bind="click: events.share">
									分享
								</button>
								<div class="u-input-group u-has-feedback u-right m-r-sm">
									<input type="text" class="u-form-control sm" placeholder="搜索" data-bind="value:searchText,event:{keyup: events.searchKeyUp}"/>
									<span class="u-form-control-feedback sm fa fa-search" data-bind="click:events.search"></span>
								</div>
							</div>
						</div>
					</div>

					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget">
								<div class="u-widget-heading">
									<h3 class="u-widget-title">发布订单列表</h3>
								</div>
								<div class="u-widget-body" id="table-list">
									<table class="u-table" style="width:100%;">
										<thead>
											<tr>
												<th><label class="u-checkbox only-style" data-bind="click: mainDataTable.toggleAllSelect.bind(mainDataTable), css:{'is-checked': mainDataTable.allSelected()}">
													<input id="checkInput" type="checkbox" class="u-checkbox-input">
													<span class="u-checkbox-label"></span> </label></th>

												<th>订单编号</th>
												<th>订单日期</th>
												<th>订单类型</th>
												<th>订单开始时间</th>
												<th>订单结束时间</th>
												<th>总预算</th>
												<th>订单描述</th>
												<th>测试相关资料</th>
												<th>备注</th>
												<th>操作</th>
											</tr>
										</thead>
										<tbody data-bind="foreach:{data:mainDataTable.rows(),as:'row', afterAdd: events.afterAdd}" >
											<tr data-bind="css: { 'is-selected' : row.selected() } ,attr:{'id': $index()}">
												<td class="checkbox1"><label class="u-checkbox only-style u-checkbox-floatl" data-bind="click: row.multiSelect, css:{'is-checked': row.selected()}">
													<input type="checkbox" class="u-checkbox-input">
													<span class="u-checkbox-label"></span> </label></td>
												<td data-bind="text: row.ref('code')"></td><!--xzn-->
												<td data-bind="text: u.dateRender(row.ref('billdate'))"></td>
												<td data-bind="text: $root.events.comboShow(row.ref('type'))"></td>
												<td data-bind="text: u.dateRender(row.ref('fromtime'))"></td>
												<td data-bind="text: u.dateRender(row.ref('totime'))"></td>
												<td data-bind="text: row.ref('budget')"></td>
												<td data-bind="text: row.ref('content')"></td>
												<td data-bind="text: row.ref('information')"></td>
												<td data-bind="text: row.ref('memo')"></td>

												<td><a href="javascript:;" class="m-r-sm" data-bind="click:$parent.events.beforeEdit.bind($data,  $index())">修改</a><a href="javascript:;" data-bind="click:$parent.events.viewRow.bind($data, $index())">查看</a>
												<a href="javascript:;" data-bind="click: $parent.events.calc.bind($data, $index())">结算</a>
												</td>
											</tr>
										</tbody>
									</table>
									<div id='pagination' class='u-pagination pagination' u-meta='{"type":"pagination","data":"mainDataTable","pageChange":"events.pageChangeFunc","sizeChange":"events.sizeChangeFunc"}'></div>

								</div>

							</div>
						</div>
					</div>

				</div>

			</div>
		</div>

		<!--编辑/新增-->

		<div class="u-mdlayout-page u-navlayout-fixed-header" id="addPage">
			<div class="u-mdlayout-page-section">
				<div class="u-container-fluid u-widget-bg">
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget" style="background-color:transparent">
								<button class="u-button raised m-r-sm" data-bind="click: events.goBack">
									返回
								</button>
								<button class="u-button raised primary" data-bind='click:events.addOrEditRow'>
									保存
								</button>
								<button class="u-button raised primary" data-bind='click:events.addAttachRow'>
									附件
								</button>
							</div>
						</div>
					</div>
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget">
								<div class="u-widget-heading">
									<h3 class="u-widget-title">订单增加信息</h3>
								</div>
								<div class="u-widget-body form-container">
									<div class="u-container-fluid">
										<div class="u-row">
											<div class="u-col-1 u-col-sm-4">
												<label class="u-input-label right">订单编号:</label>
											</div>
											<div class="u-col-3 u-col-sm-8 m-b-md">
												<input type="text" class="u-form-control" placeholder="订单编号" u-meta='{"id":"code","type":"string","data":"infodata","field":"code"}'>
											</div>

											<div class="u-col-1 u-col-sm-4">
												<label class="u-input-label right">订单日期:</label>
											</div>
											<div class="u-col-3 u-col-sm-8 m-b-md">
												<div class="u-input-group u-has-feedback" u-meta='{"id":"billdate","type":"u-date","data":"infodata","field":"billdate"}'>
													<input type="text" class="u-form-control"/>
													<span class="u-form-control-feedback fa fa-calendar" data-role="date-button"></span>
												</div>
											</div>

											<div class="u-col-1 u-col-sm-4">
												<label class="u-input-label right">订单类型:</label>
											</div>
											<div class="u-col-3 u-col-sm-8 m-b-md">
												
												<div class="u-input-group u-has-feedback" u-meta='{"id":"type","data":"infodata","field":"type","type":"u-combobox","datasource":"comboData"}'>
												    <input type="text"  class="u-form-control"/>
												</div>
											</div>

											<div class="u-col-1 u-col-sm-4">
												<label class="u-input-label right">开始日期:</label>
											</div>
											<div class="u-col-3 u-col-sm-8 m-b-md">
												<div class="u-input-group u-has-feedback" u-meta='{"id":"fromtime","type":"u-date","data":"infodata","field":"fromtime"}'>
													<input type="text" class="u-form-control"/>
													<span class="u-form-control-feedback fa fa-calendar" data-role="date-button"></span>
												</div>
											</div>
											<div class="u-col-1 u-col-sm-4">
												<label class="u-input-label right">结束日期:</label>
											</div>
											<div class="u-col-3 u-col-sm-8 m-b-md">
												<div class="u-input-group u-has-feedback" u-meta='{"id":"totime","type":"u-date","data":"infodata","field":"totime"}'>
													<input type="text" class="u-form-control"/>
													<span class="u-form-control-feedback fa fa-calendar" data-role="date-button"></span>
												</div>
											</div>
											<div class="u-col-1 u-col-sm-4">
												<label class="u-input-label right">总预算:</label>
											</div>
											<div class="u-col-3 u-col-sm-8 m-b-md">
												<input type="text" class="u-form-control" placeholder="总预算" u-meta='{"id":"budget","type":"integer","data":"infodata","field":"budget"}'>
											</div>

										</div>

										<div class="u-col-1 u-col-sm-4">
											<label class="u-input-label right">订单描述:</label>
										</div>
										<div class="u-col-3 u-col-sm-8 m-b-md">
											<input type="text" class="u-form-control" placeholder="订单描述" u-meta='{"id":"content","type":"string","data":"infodata","field":"content"}'>
										</div>
										<div class="u-col-1 u-col-sm-4">
											<label class="u-input-label right">测试相关资料:</label>
										</div>
										<div class="u-col-3 u-col-sm-8 m-b-md">
											<input type="text" class="u-form-control" placeholder="测试相关资料" u-meta='{"id":"information","type":"string","data":"infodata","field":"information"}'>
										</div>
										<div class="u-col-1 u-col-sm-4">
											<label class="u-input-label right">备注:</label>
										</div>
										<div class="u-col-3 u-col-sm-8 m-b-md">
											<input type="text" class="u-form-control" placeholder="备注" u-meta='{"id":"memo","type":"string","data":"infodata","field":"memo"}'>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- 子表表单内容 -->
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget" style="background-color:transparent">
								<button class="u-button raised primary m-r-sm" data-bind="click: events.addListRow">
									增行
								</button>
								<button class="u-button raised" data-bind="click: events.delListRow">
									删行
								</button>
							</div>
						</div>
					</div>
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget">
								<div class="u-widget-heading">
									<h3 class="u-widget-title">订单信息明细</h3>
								</div>
								<div class="u-widget-body" id="table-list">
									<div id="listGridDiv" u-meta='{"id":"listGrid","type":"grid","data":"listData","editable":true,"multiSelect":true}'>
										<div options='{"field":"testitemcode","dataType":"String","title":"测试项目编码","editType":"refEditFun"}'></div>
										<div options='{"field":"testitemname","dataType":"String","title":"测试项目名称","editType":"refEditFun"}'></div>
										<div options='{"field":"tprice","dataType":"String","title":"报价","editType":"float"}'></div>
										<div options='{"field":"tnumber","dataType":"String","title":"数量","editType":"integer"}'></div>
										<div options='{"field":"tsum","dataType":"String","title":"金额","editType":"float"}'></div>
										<div options='{"field":"fromtime","dataType":"String","title":"开始时间","editType":"date"}'></div>
										<div options='{"field":"totime","dataType":"String","title":"结束时间","editType":"date"}'></div>
										<div options='{"field":"requirement","dataType":"String","title":"测试要求","editType":"string"}'></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="u-mdlayout-page u-navlayout-fixed-header" id="showPage">
			<div class="u-mdlayout-page-section">
				<div class="u-container-fluid u-widget-bg">
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget" style="background-color:transparent">
								<button class="u-button raised primary m-r-sm" data-bind="click: events.goBack">
									返回
								</button>
							</div>
						</div>
					</div>
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget">
								<div class="u-widget-heading">
									<h3 class="u-widget-title">订单信息</h3>
								</div>
								<div class="u-widget-body form-container">
									<ul class="u-form-browse">
										<li class="m-v">
											<label class="u-control-label w-sm">订单编号:</label>
											<span data-bind="text:mainDataTable.ref('code')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单日期:</label>
											<span data-bind="text:mainDataTable.ref('billdate')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">测试类型:</label>
											<span data-bind="text:events.comboShow(mainDataTable.ref('type'))"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单开始时间:</label>
											<span data-bind="text:u.dateRender(mainDataTable.ref('fromtime'))"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单结束时间:</label>
											<span data-bind="text:u.dateRender(mainDataTable.ref('totime'))"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">总预算:</label>
											<span data-bind="text:mainDataTable.ref('budget')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单描述:</label>
											<span data-bind="text:mainDataTable.ref('content')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">测试相关资料:</label>
											<span data-bind="text:mainDataTable.ref('information')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">备注<:</label>
											<span data-bind="text:mainDataTable.ref('memo')"></span>
										</li>

									</ul>
								</div>
							</div>

						</div>
					</div>
				
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget">
								<div class="u-widget-heading">
									<h3 class="u-widget-title">订单信息列表</h3>
								</div>
								<div class="u-widget-body" id="table-list">
									<div id="viewlistGridDiv" u-meta='{"id":"viewlistGrid","type":"grid","data":"listData","editable":false,"multiSelect":false}'>
										<div options='{"field":"testitemcode","dataType":"String","title":"测试项目编码"}'></div>
										<div options='{"field":"testitemname","dataType":"String","title":"测试项目名称"}'></div>
										<div options='{"field":"tprice","dataType":"String","title":"报价"}'></div>
										<div options='{"field":"tnumber","dataType":"String","title":"数量"}'></div>
										<div options='{"field":"tsum","dataType":"String","title":"金额"}'></div>
										<div options='{"field":"fromtime","dataType":"String","title":"开始时间"}'></div>
										<div options='{"field":"totime","dataType":"String","title":"结束时间"}'></div>
										<div options='{"field":"requirement","dataType":"String","title":"测试要求"}'></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>

		<!-- 集成支付 -->
		<div class="u-mdlayout-page u-navlayout-fixed-header" id="calcPage">
			<div class="u-mdlayout-page-section">
				<div class="u-container-fluid u-widget-bg">
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget" style="background-color:transparent">
								<button class="u-button raised primary m-r-sm" data-bind="click: events.goBack">
									返回
								</button>
							</div>
						</div>
					</div>
					<div class="u-row">
						<div class="u-col-12">
							<div class="u-widget">
								<div class="u-widget-heading">
									<h3 class="u-widget-title">订单信息</h3>
								</div>
								<div class="u-widget-body form-container">
									<ul class="u-form-browse">
										<li class="m-v">
											<label class="u-control-label w-sm">订单编号:</label>
											<span data-bind="text:mainDataTable.ref('code')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm"><font color="red">*</font>支付金额:</label>
											<span data-bind="text:mainDataTable.ref('budget')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单日期:</label>
											<span data-bind="text:mainDataTable.ref('billdate')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">测试类型:</label>
											<span data-bind="text:mainDataTable.ref('type')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单开始时间:</label>
											<span data-bind="text:u.dateRender(mainDataTable.ref('fromtime'))"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">订单结束时间:</label>
											<span data-bind="text:u.dateRender(mainDataTable.ref('totime'))"></span>
										</li>					
										<li class="m-v">
											<label class="u-control-label w-sm">订单描述:</label>
											<span data-bind="text:mainDataTable.ref('content')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">测试相关资料:</label>
											<span data-bind="text:mainDataTable.ref('information')"></span>
										</li>
										<li class="m-v">
											<label class="u-control-label w-sm">备注<:</label>
											<span data-bind="text:mainDataTable.ref('memo')"></span>
										</li>

									</ul>
						<div>
							<dt nowrap=""><font color="red">*</font>付款方式：</dt>
							<dd nowrap="">
							<div class="pay_channel_list">
								<div><input type="radio" name="pay_type" style="width:15px;" value="ALI_APY" onclick="notShowBankList()" checked/><label>支付宝账户支付/扫码支付</label><br></div>
								<div><input type="radio" name="pay_type" style="width:15px;" value="ALI_BANK" onclick="showBankList()"/><label>支付宝网银支付</label><br></div>
								<div><input type="radio" name="pay_type" style="width:15px;" value="ALI_GU" onclick="notShowBankList()" /><label>支付宝担保交易</label><br></div>
								<div><input type="radio" name="pay_type" style="width:15px;" value="WX_SCAN" onclick="notShowBankList()" /><label>微信扫码支付</label><br></div>
								<div><input type="radio" name="pay_type" style="width:15px;" value="CHANJETPAY" onclick="notShowBankList()" /><label>畅捷支付</label><br></div>
							</div>						
						  </dd>
						</div>
						<div class="bank-list">
						<dt>付款银行：</dt>
						<dd class="payment-list type-check">
							<ul class="pl-wrap">
								<li class="pl-item selected">
									<span class="bank-logo" id="bank-icbc">中国工商银行</span>
									<i class="pl-i-selected"></i>
									<input type="radio" class="radio_bank_code" name="pay_bank" value="ICBC" checked="checked">
								</li>
								<li class="pl-item">
									<span class="bank-logo" id="bank-ccb">中国建设银行</span>
									<i class="pl-i-selected"></i>
									<input type="radio" class="radio_bank_code" name="pay_bank" value="CCB">
								</li>
								<li class="pl-item"><span class="bank-logo" id="bank-cmb">招商银行</span>
									<i class="pl-i-selected"></i>
									<input type="radio" class="radio_bank_code" name="pay_bank" value="CMB">
								</li>
								<li class="pl-item"><span class="bank-logo" id="bank-abc">中国农业银行</span>
									<i class="pl-i-selected"></i>
									<input type="radio" class="radio_bank_code" name="pay_bank" value="ABC">
								</li>
							</ul>
						</dd>
					</div>
					<dd>
						<span class="new-btn-login-sp">
							<button class="new-btn-login"  style="text-align: center;" data-bind="click: events.doPay">确 认</button>
						</span>
					</dd>
						
								</div>
							</div>

						</div>
					</div>
			</div>
		</div>
		</div>

		<!--分享层 -->
		<div id="light"
		style="display: none; position: absolute; top: 100px; left: 30%; width: 40%; height: 350px; padding: 16px; border: 5px solid gray; background-color: white; z-index: 1002; overflow: auto;">
			分享到 : <a href="javascript:void(0)"
			onclick="document.getElementById('light').style.display='none'"> <img src="images/saas/x.png" border="0"
			style="float: right;" alt="关闭"> </a>
			<ul id="bsLogoList">
				<div id="bp-qqmb" style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)"
					onclick="ShareToTencent(document.title,location.href,document.title);"
					class="tmblog"><img
					src="images/saas/qqweibo.gif" border="0"
					alt="腾讯微博"></a>
					<div style="font-size: 10px;" title="腾讯微博">
						腾讯微博
					</div>
				</div>
				<div id="bp-sinaminiblog"
				style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)"
					onclick="ShareToSina(document.title,location.href,document.title);"
					class="tmblog"><img
					src="images/saas/sinaweibo.gif" border="0"
					alt="新浪微博"></a>
					<div style="font-size: 10px;" title="新浪微博">
						新浪微博
					</div>
				</div>
				<div id="bp-qqim" style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)"
					onclick="ShareToQQIM(document.title,location.href,document.title);"
					class="tmblog"><img src="images/saas/qqim.gif"
					border="0" alt="QQ"></a>
					<div style="font-size: 10px;" title="QQ">
						QQ
					</div>
				</div>
				<div id="bp-qzone" style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)"
					onclick="ShareToQzone(document.title,location.href,document.title);"
					class="tmblog"><img
					src="images/saas/qzone.gif" border="0" alt="QQ空间"></a>
					<div style="font-size: 10px;" title="QQ空间">
						QQ空间
					</div>
				</div>

				<div id="bp-baiduhi" style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)"
					onclick="ShareToBaiduTieba(document.title,location.href,document.title);"
					class="tmblog"><img
					src="images/saas/baiduhi.gif" border="0" alt="百度"></a>
					<div style="font-size: 10px;" title="百度贴吧">
						百度贴吧
					</div>
				</div>
				<div id="bp-douban" style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)"
					onclick="ShareToDouban(document.title,location.href,document.title);"
					class="tmblog"><img
					src="images/saas/douban.gif" border="0" alt="豆瓣网"></a>
					<div style="font-size: 10px;" title="豆瓣网">
						豆瓣网
					</div>
				</div>
				<div id="bp-wechart" style="float: left; width: 50px; margin: 15px;">
					<a href="javascript:void(0)" onclick="ShareToWeChart();"
					class='tmblog'> <img
					src="images/saas/wechart.png" border="0"
					alt="微信分享"> </a>
					<div style="font-size: 10px;" title="微信分享">
						微信
					</div>
				</div>
			</ul>
		</div>

		<!-- 二维码展示层 -->
		<div id="qrcode"
		style="display: none; position: absolute; top: 300px; left: 40%; padding: 16px; border: 2px solid gray; background-color: white; z-index: 1003; overflow: auto;">
			<a href="javascript:void(0)"
			onclick="document.getElementById('qrcode').style.display='none'"> <img src="images/saas/x.png" border="0"
			style="float: right;" alt="关闭"> </a>
		</div>
		<!--end分享层 -->

	</div>
</div>
